Wildfish Django Starter
=======================

.. image:: https://travis-ci.org/wildfish/wildfish-django-starter.svg?branch=master
    :alt: Build Status
    :target: https://travis-ci.org/wildfish/wildfish-django-starter

A Django 2.0 friendly project cookiecutter template to kick start development
for new projects. Includes apps and settings we use in the majority of projects,
along with an integrated version of our other cookiecutter-django-crud template
which will also generate a model, CRUD views and tests.

Features
--------

* 2 tier layout
* Python essentials: ipython, ipdb, flake8
* Requirements file managed using pip-tools.
* Settings using django-configurations
* Testing bits: django-webtest, model-mommy
* Redis cache (via django-redis-cache)
* Sentry's raven client, django-debug-toolbar
* django-bootstrap3, django-model-utils
* Django CRUD views and templates using django-vanilla-views.
* A Django ModelForm using bootstrap3.
* Tests for all of the views using WebTest.
* Model Mommy generated models for the tests.
* Use Vagrant for 'local' deployments.
* Deploy to any server using Fabric and Invoke.


Quickstart
----------
Install Vagrant and virtualbox::

    sudo apt-get install vagrant virtualbox

Ensure you have cookiecutter and pip-tools installed::

    pip install cookiecutter
    pip install pip-tools

Then use cookiecutter to generate your project from this template with::

    cookiecutter git@github.com:wildfish/wildfish-django-starter.git

The Vagrant VM is assigned a static IP address of 192.168.10.10. You will need
to add this address to your /etc/hosts file to access the web site::

    192.168.10.10 <project_slug>.local

where <project_slug> is the value you chose when generating the project from
the cookiecutter template.

Then from your generated project you can deploy the full project to a local
Vagrant instance using::

    pip-compile requirements.in

    vagrant up --provision

    vagrant ssh-config > ssh-config

    fab -H <project_slug>.local --ssh-config ssh-config deploy.full

Don't forget to replace <project_slug> with the actual value you used.

Requirements using pip-compile
------------------------------

The generated project uses a requirements.in file to make it straightforward
to keep pinned requirements up to date using the ``pip-compile`` command
from ``pip-tools``.

To generate a requirements.txt from your project simply use the ``pip-compile`` command.

Read more here, https://github.com/nvie/pip-tools#example-usage-for-pip-compile

Project layout
--------------
The deployed site has a specific project layout as follows::

    <project_slug>
        +-- logs
        +-- media
        +-- run
        +-- static
        +-- venv
        +-- <project_slug>
            +-- manage.py
            +-- requirements.txt
            +-- templates/
            +-- uwsgi.ini
            +-- <project_slug>
                +-- settings.py
                +-- uwsgi.py

Everything is self contained and specified relative to the root, <project_slug>, directory.
Configuration files for nginx and supervisor are installed in /etc/nginx/sites-available and
/etc/supervisor/conf.d/ respectively.

All the paths are defined in the file, fabric.json, which is generated by Cookiecutter and
used by Fabric during the deployment. You can edit the file to set the locations according
to your preferred layout. If you have slightly different layouts for staging and production
servers for example, simply copy the file and pass it on the command line when you deploy
the project::

   fab -H staging --config staging.json deploy.full

